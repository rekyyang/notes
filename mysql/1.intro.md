# 缓存

# 锁与并发
## 锁类型：
1. 读写锁，读锁（共享锁），写锁（排他锁）
## 锁粒度
1. 行锁
2. 表锁

# 事务
## 事务的特性ACID
1. A原子性，不可分的最小单元，要么没执行，要么全部执行
2. C一致性，数据库总是从一个一致性的状态转换到另一个一致性的状态。
3. I隔离性，事务的修改在提交前，对于另一个事务是不可见的
4. D持久性，事务提交，修改永久修改

##四种问题
1. 脏读，事务A读到了事务B修改的中间数据
2. 不可重复读，由于事务A改变数据a。事务B中前后两次读取a的值不一致。第一次事务A没有提交，第二次事务A已提交
3. 幻读，事务A会insert，事务B第二次读取读取到了新的行

## 隔离级别
1. 读未提交，最低的等级，会存在脏读
2. 读已提交，避免脏读
3. 可重复读，避免不可重复读（mvcc机制可以避免幻读，间隔锁）
4. 串行化，避免所有上述问题，并发性差

## 死锁

## 事务日志
提高事务效率，修改内存拷贝，然后持久化到硬盘上。顺序io追加

# 存储数据结构

# MVCC
行锁的变种，不同引擎实现方式不同。 