# process

## linux's process

### 分类

1. 前台进程
2. 守护进程

创建 就绪 等待 运行 终止

### fork exec

父进程返回子进程pid，子进程返回0

### init进程

init进程是所有进程的父进程

### 僵尸进程和孤儿进程

孤儿进程，父进程结束，子进程继续运行，会被init收养
僵尸进程，子进程结束，父进程尚未回收子进程，子进程残留PCB于内核，成为僵尸进程。

### 程序内存布局

代码段
数据段 初始化的全局、静态
BSS段 未初始化的全局、静态
堆
栈
映射段 mmap

### 栈和PCB

PCB
    进程status
    io设备、文件列表
    优先级

进程栈
    用户态栈，即程序内存中的栈
线程栈
    linux线程仅仅是一个和其他进程共享地址空间的进程，有CLONE_VM标记，内存描述符直接指向父进程的内存描述符
    主线程的进程栈是fork时生成的，复制了父进程的stack空间地址，写时拷贝，动态增长
    子线程的栈时mmap分配的
内核栈
    进程陷入内核后使用的栈。内核栈和PCB互相指针指向
中断栈



